<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>TemporalQA Annotations</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <style>
      #instructions-pane {
          background-color: #EBDEF0;
          height: 650px;
          overflow: auto;
          padding-top: 0px;
          padding-right: 15px;
          padding-left: 15px;
      }
      
      #right-pane {
          background-color: #EEEEEE;
          height: 650px;
          overflow: auto;
      }

      .list-group {
          padding-left: 30px;
          padding-top: 15px;
      }

      .list-group-item {
          padding-left: 40px;
          padding-right: 20px;
          padding-top: 10px;
          padding-bottom: 10px;
      }

      hr {
          height: 1px;
          background-color: #ccc;
          border: none;
      }
    </style>
  </head>

  <body>
    <div role="main" class="container-fluid">
      <div class="row">
        <div class="col-8" id="instructions-pane">
          <br/>
          <h1>Instructions:</h1>
          <div class="my-3 pl-5">
            <ul>
              <li>
                Help us make search systems (i.e. Google) smarter by teaching them to identify questions whose answers may change over time!
              </li>
              <li>
                In this task, you will be have to <b>identify questions whose answers changed over time</b>. 
              </li>
              <li>
                Read through these instructions and examples to get started!
              </li>
            </ul>
            <h4>Steps:</h4>
            <ol>
              <li class="my-2">
                For each question on the right, <b>identify whether or not the answer has changed in the past</b>:
                <ul>
                  <li>
                    <b>Yes:</b> The answer to this quesion <b>has changed</b> in the past.
                  </li>
                  <li>
                    <b>No:</b> The answer to this quesion <b>has not changed</b>.
                  </li>
                  <li>
                    <b>Maybe:</b> You should select this option if <b>you understand the question, but cannot determine if its answer has changed</b>.
                    <ul>
                      <li>
                        You may also select this option if <b>the answer to this question changes based on opinion</b> (see Examples below)
                      </li>
                      <li>
                        Before selecting this option, you should perform a <b>brief Google search</b> to see if the answer has changed. If you still can't tell, then select this option.
                      </li>
                    </ul>
                  </li>
                  <li>
                    <b>Malformed Question:</b> Respond with this option if you <b>cannot make sense of the question</b>.
                  </li>
                </ul>

              </li>
              <li class="my-2">
                <b>Submit</b> the HIT by clicking the button at the bottom form to the right after you have responded for each question.
              </li>
            </ol>
          </div>
          <hr/>
          <h4><b>Before you begin</b>, read through these examples</h4>
          <br/>
          <div>
            <div class="alert text-dark" style="background-color: #EEEEEE">
              <h5><b>Example 1</b></h5>
              <hr />
              <div class="row">
                <div class="col-6">
                  <fieldset disabled>
                    <h5><b>Question:</b> What city is the next winter olympics in?</h5> <div class="list-group list-group-horizontal">
                      <label class="list-group-item list-group-item-success">
                        <input class="form-check-input me-1" type="radio" value="" checked>
                        <b>Yes</b>
                      </label>
                      <label class="list-group-item list-group-item-danger">
                        <input class="form-check-input me-1" type="radio" value="">
                        No
                      </label>
                      <label class="list-group-item list-group-item-warning">
                        <input class="form-check-input me-1" type="radio" value="">
                        Maybe
                      </label>
                      <label class="list-group-item list-group-item-dark">
                        <input class="form-check-input me-1" type="radio" value="">
                        Malformed Question
                      </label>
                    </div>
                  </fieldset>
                </div>
                <div class="col-6">
                  <h5><b>Explanation:</b></h5>
                  <p class="pl-5">
                    The olympics are held in a different city every 4 years. Therefore, the answer changes ever four years.
                  </p>
                </div>
              </div>
            </div>
            <div class="alert text-dark" style="background-color: #EEEEEE">
              <h5><b>Example 2</b></h5>
              <hr />
              <div class="row">
                <div class="col-6">
                  <fieldset disabled>
                    <h5><b>Question:</b> What movies did Adam Sandler play in?</h5> <div class="list-group list-group-horizontal">
                      <label class="list-group-item list-group-item-success">
                        <input class="form-check-input me-1" type="radio" value="" checked>
                        <b>Yes</b>
                      </label>
                      <label class="list-group-item list-group-item-danger">
                        <input class="form-check-input me-1" type="radio" value="">
                        No
                      </label>
                      <label class="list-group-item list-group-item-warning">
                        <input class="form-check-input me-1" type="radio" value="">
                        Maybe
                      </label>
                      <label class="list-group-item list-group-item-dark">
                        <input class="form-check-input me-1" type="radio" value="">
                        Malformed Question
                      </label>
                    </div>
                  </fieldset>
                </div>
                <div class="col-6">
                  <h5><b>Explanation:</b></h5>
                  <p class="pl-5">
                    The answer to this question has changed with the release of each new Adam Sandler movie.
                  </p>
                </div>
              </div>
            </div>
            <div class="alert text-dark" style="background-color: #EEEEEE">
              <h5><b>Example 3</b></h5>
              <hr />
              <div class="row">
                <div class="col-6">
                  <fieldset disabled>
                    <h5><b>Question:</b> Where was Dwight Howard born?</h5> <div class="list-group list-group-horizontal">
                      <label class="list-group-item list-group-item-success">
                        <input class="form-check-input me-1" type="radio" value="">
                        Yes
                      </label>
                      <label class="list-group-item list-group-item-danger">
                        <input class="form-check-input me-1" type="radio" value="" checked>
                        <b>No</b>
                      </label>
                      <label class="list-group-item list-group-item-warning">
                        <input class="form-check-input me-1" type="radio" value="">
                        Maybe
                      </label>
                      <label class="list-group-item list-group-item-dark">
                        <input class="form-check-input me-1" type="radio" value="">
                        Malformed Question
                      </label>
                    </div>
                  </fieldset>
                </div>
                <div class="col-6">
                  <h5><b>Explanation:</b></h5>
                  <p class="pl-5">
                    This answer does not change because being born is a one-time event.
                  </p>
                </div>
              </div>
            </div>
            <div class="alert text-dark" style="background-color: #EEEEEE">
              <h5><b>Example 4</b></h5>
              <hr />
              <div class="row">
                <div class="col-6">
                  <fieldset disabled>
                    <h5><b>Question:</b> The most common type of rock in Earth's crust is?</h5> <div class="list-group list-group-horizontal">
                      <label class="list-group-item list-group-item-success">
                        <input class="form-check-input me-1" type="radio" value="">
                        Yes
                      </label>
                      <label class="list-group-item list-group-item-danger">
                        <input class="form-check-input me-1" type="radio" value="" checked>
                        <b>No</b>
                      </label>
                      <label class="list-group-item list-group-item-warning">
                        <input class="form-check-input me-1" type="radio" value="">
                        Maybe
                      </label>
                      <label class="list-group-item list-group-item-dark">
                        <input class="form-check-input me-1" type="radio" value="">
                        Malformed Question
                      </label>
                    </div>
                  </fieldset>
                </div>
                <div class="col-6">
                  <h5><b>Explanation:</b></h5>
                  <p class="pl-5">
                    Earth's crust has remained consistent throughout history.
                  </p>
                </div>
              </div>
            </div>
            <div class="alert text-dark" style="background-color: #EEEEEE">
              <h5><b>Example 5</b></h5>
              <hr />
              <div class="row">
                <div class="col-6">
                  <fieldset disabled>
                    <h5><b>Question:</b> Who was Michael Jackson's best friend?</h5> <div class="list-group list-group-horizontal">
                      <label class="list-group-item list-group-item-success">
                        <input class="form-check-input me-1" type="radio" value="">
                        Yes
                      </label>
                      <label class="list-group-item list-group-item-danger">
                        <input class="form-check-input me-1" type="radio" value="">
                        No
                      </label>
                      <label class="list-group-item list-group-item-warning">
                        <input class="form-check-input me-1" type="radio" value="" checked>
                        <b>Maybe</b>
                      </label>
                      <label class="list-group-item list-group-item-dark">
                        <input class="form-check-input me-1" type="radio" value="">
                        Malformed Question
                      </label>
                    </div>
                  </fieldset>
                </div>
                <div class="col-6">
                  <h5><b>Explanation:</b></h5>
                  <p class="pl-5">
                    The there isn't a definintive answer to this question since its subject to opinion. Therefore, the the correct response is <b>Maybe</b>.
                  </p>
                </div>
              </div>
            </div>
            <div class="alert text-dark" style="background-color: #EEEEEE">
              <h5><b>Example 6</b></h5>
              <hr />
              <div class="row">
                <div class="col-6">
                  <fieldset disabled>
                    <h5><b>Question:</b> What is there to do in Laredo TX?</h5> <div class="list-group list-group-horizontal">
                      <label class="list-group-item list-group-item-success">
                        <input class="form-check-input me-1" type="radio" value="">
                        Yes
                      </label>
                      <label class="list-group-item list-group-item-danger">
                        <input class="form-check-input me-1" type="radio" value="">
                        No
                      </label>
                      <label class="list-group-item list-group-item-warning">
                        <input class="form-check-input me-1" type="radio" value="" checked>
                        <b>Maybe</b>
                      </label>
                      <label class="list-group-item list-group-item-dark">
                        <input class="form-check-input me-1" type="radio" value="">
                        Malformed Question
                      </label>
                    </div>
                  </fieldset>
                </div>
                <div class="col-6">
                  <h5><b>Explanation:</b></h5>
                  <p class="pl-5">
                    The answer to this question is a matter of opinion. Therefore, the the correct response is <b>Maybe</b>.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-4" id="right-pane">
          <div class="alert alert-primary my-2">
            <h5><b>Question:</b> ${QUESTION_0}</h5>
            <div class="list-group list-group-horizontal">
              <label class="list-group-item list-group-item-success">
                <input class="form-check-input me-1" name="isTemporal0" type="radio" value="Yes" autocomplete="off">
                Yes
              </label>
              <label class="list-group-item list-group-item-danger">
                <input class="form-check-input me-1" name="isTemporal0" type="radio" value="No" autocomplete="off">
                No
              </label>
              <label class="list-group-item list-group-item-warning">
                <input class="form-check-input me-1" name="isTemporal0" type="radio" value="Maybe" autocomplete="off">
                Maybe
              </label>
              <label class="list-group-item list-group-item-dark">
                <input class="form-check-input me-1" name="isTemporal0" type="radio" value="Unknown" autocomplete="off">
                Malformed Question
              </label>
            </div>
          </div>
          <div class="alert alert-primary my-2">
            <h5><b>Question:</b> ${QUESTION_1}</h5>
            <div class="list-group list-group-horizontal">
              <label class="list-group-item list-group-item-success">
                <input class="form-check-input me-1" name="isTemporal1" type="radio" value="Yes" autocomplete="off">
                Yes
              </label>
              <label class="list-group-item list-group-item-danger">
                <input class="form-check-input me-1" name="isTemporal1" type="radio" value="No" autocomplete="off">
                No
              </label>
              <label class="list-group-item list-group-item-warning">
                <input class="form-check-input me-1" name="isTemporal1" type="radio" value="Maybe" autocomplete="off">
                Maybe
              </label>
              <label class="list-group-item list-group-item-dark">
                <input class="form-check-input me-1" name="isTemporal1" type="radio" value="Unknown" autocomplete="off">
                Malformed Question
              </label>
            </div>
          </div>
          <div class="alert alert-primary my-2">
            <h5><b>Question:</b> ${QUESTION_2}</h5>
            <div class="list-group list-group-horizontal">
              <label class="list-group-item list-group-item-success">
                <input class="form-check-input me-1" name="isTemporal2" type="radio" value="Yes" autocomplete="off">
                Yes
              </label>
              <label class="list-group-item list-group-item-danger">
                <input class="form-check-input me-1" name="isTemporal2" type="radio" value="No" autocomplete="off">
                No
              </label>
              <label class="list-group-item list-group-item-warning">
                <input class="form-check-input me-1" name="isTemporal2" type="radio" value="Maybe" autocomplete="off">
                Maybe
              </label>
              <label class="list-group-item list-group-item-dark">
                <input class="form-check-input me-1" name="isTemporal2" type="radio" value="Unknown" autocomplete="off">
                Malformed Question
              </label>
            </div>
          </div>
          <div class="alert alert-primary my-2">
            <h5><b>Question:</b> ${QUESTION_3}</h5>
            <div class="list-group list-group-horizontal">
              <label class="list-group-item list-group-item-success">
                <input class="form-check-input me-1" name="isTemporal3" type="radio" value="Yes" autocomplete="off">
                Yes
              </label>
              <label class="list-group-item list-group-item-danger">
                <input class="form-check-input me-1" name="isTemporal3" type="radio" value="No" autocomplete="off">
                No
              </label>
              <label class="list-group-item list-group-item-warning">
                <input class="form-check-input me-1" name="isTemporal3" type="radio" value="Maybe" autocomplete="off">
                Maybe
              </label>
              <label class="list-group-item list-group-item-dark">
                <input class="form-check-input me-1" name="isTemporal3" type="radio" value="Unknown" autocomplete="off">
                Malformed Question
              </label>
            </div>
          </div>
          <div class="alert alert-primary my-2">
            <h5><b>Question:</b> ${QUESTION_4}</h5>
            <div class="list-group list-group-horizontal">
              <label class="list-group-item list-group-item-success">
                <input class="form-check-input me-1" name="isTemporal4" type="radio" value="Yes" autocomplete="off">
                Yes
              </label>
              <label class="list-group-item list-group-item-danger">
                <input class="form-check-input me-1" name="isTemporal4" type="radio" value="No" autocomplete="off">
                No
              </label>
              <label class="list-group-item list-group-item-warning">
                <input class="form-check-input me-1" name="isTemporal4" type="radio" value="Maybe" autocomplete="off">
                Maybe
              </label>
              <label class="list-group-item list-group-item-dark">
                <input class="form-check-input me-1" name="isTemporal4" type="radio" value="Unknown" autocomplete="off">
                Malformed Question
              </label>
            </div>
          </div>
          <div class="alert alert-danger" id='submitErrorAlert' style="display: none;">
            <h5>Please make sure that all questions have a response</h5>
          </div>
          <button class="btn btn-primary my-2" type="button" id='submitResponse'>
            Submit HIT
          </button>
        </div>
        <form id="mturkForm" name="mturk_form" method="post" autocomplete="off">
          <div class="form-group">
            <input id="assignmentId" name="assignmentId" type='hidden' readOnly />
            <input id="hitId" name="hitId" type='hidden' readOnly />
            <input id="workerId" name="workerId" type='hidden' readOnly />
            <input id="queriesUsed" name="queriesUsed" type='hidden' readOnly />
            <input id="articlesUsed" name="articlesUsed" type='hidden' readOnly />
            <input id="answerData" name="answerData" type='hidden' readOnly />
          </div>
        </form>
      </div>
    </div>

    <!-- Bootstrap core JavaScript
         ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>


    <script>
      function turkGetParam( name, defaultValue ) { 
          var regexS = "[\?&]"+name+"=([^&#]*)"; 
          var regex = new RegExp( regexS ); 
          var tmpURL = window.location.href; 
          var results = regex.exec( tmpURL ); 
          if( results == null ) { 
              return defaultValue; 
          } else { 
              return results[1];    
          } 
      }
      
      function decode(strToDecode)
      {
          var encoded = strToDecode;
          return unescape(encoded.replace(/\+/g,  " "));
      }
      
      function turkGetSubmitToHost() {
          var defaultHost = "https://www.mturk.com";
          var submitToHost = decode(turkGetParam("turkSubmitTo", defaultHost));
          if (stringStartsWith(submitToHost, "https://")) {
              return submitToHost;
          }
          if (stringStartsWith(submitToHost, "http://")) {
              return submitToHost;
          }
          if (stringStartsWith(submitToHost, "//")) {
              return submitToHost;
          }
          return defaultHost;
      }
      
      // Inlined functionality for String.startsWith as IE does not support that method.
      // Function body from:
      // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith#Polyfill
      function stringStartsWith(str, search, pos) {
          pos = (!pos || pos < 0) ? 0 : +pos;
          return str.substring(pos, pos + search.length) === search;
      }

      $(document).ready(function() {
          $("#submitResponse").click(function() {
              if ($('input[name=isTemporal0]:checked').val() &&
                  $('input[name=isTemporal1]:checked').val() &&
                  $('input[name=isTemporal2]:checked').val() &&
                  $('input[name=isTemporal3]:checked').val() &&
                  $('input[name=isTemporal4]:checked').val()) {
                  submitHIT();
              } else {
                  $("#submitErrorAlert").show();
              }
          });
      });

      function submitHIT() {
          $("#mturkForm")[0].action = turkGetSubmitToHost() + "/mturk/externalSubmit";
          $("#assignmentId").val(turkGetParam('assignmentId', ""));
          $("#hitId").val(turkGetParam('hitId', ""));
          $("#workerId").val(turkGetParam('workerId', ""));
          let all_answer_data = {
              'is_temporal': [$('input[name=isTemporal0]:checked').val(),
                              $('input[name=isTemporal1]:checked').val(),
                              $('input[name=isTemporal2]:checked').val(),
                              $('input[name=isTemporal3]:checked').val(),
                              $('input[name=isTemporal4]:checked').val()],
              'assignment_id': $("#assignmentId").val(),
              'worker_id': $("#workerId").val(),
          };
          $("#answerData").val(JSON.stringify(all_answer_data));
          $("#mturkForm").submit();
      }
    </script>
  </body>
</html>
